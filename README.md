# Experimental Robotics Lab Assignment 2:
## I. Cluedo investigation

![Cluedo_Map](https://user-images.githubusercontent.com/48509825/161590960-7892a0c4-97c4-4b8c-9630-f4886926a472.jpg)

Figure 1: Cluedo map of the original game

## II. Description:
In this repository you can find a solution to a Cluedo like investigation game played by Sherlock robot.
in wich took place the murder and finally killer_weapon is the name of the weapon.
An hypothesis is complete if all the fields are filled, it is consistent if it is complete and only one name for each filed is present.
In figure 2 and 3 you can see the simulation enviroment of Rviz and Gazebo respectively.
IN the simulation are present 4 markers, in position [-3,0], [3,0], [0,3], [0,-3] to a random high of 0.75 or 1.25, (Figure 2).
Once a marker is reached with the arm a new hint is generated, notice that sometimes a malformed hint could be generated.


![Rviz](https://user-images.githubusercontent.com/48509825/161597045-612042ba-51df-43fa-bba0-c3e3dda0dcaf.jpeg)
Figure 2: Sherlock in Rviz simulator


![Gazebo](https://user-images.githubusercontent.com/48509825/161597048-1cdd427d-e2b3-4cc7-af49-7e92d99416c0.jpeg)
Figure 3: Sherlock in Gazebo simulator

Once an hypothesis is consistent Sherlock has to go in the centre of the arena in order to ask to the oracle if the collected hypothesis
is the true one. If the hypothesis is wrong Sherlock has to collect other hints until the true hypothesis is found.
The game ends when the oracle validates Sherlock solution.
The peculiarity of this assignment is that the behaviour above descripted is no more managed as in the previous assignment trough a 
FSM but in this case trough ROSPlan.

## III. ROSPlan:
The ROSPlan framework provides a generic method for task planning in a ROS system. ROSPlan encapsulates both planning and dispatch. 
It provides with a simple interface, and already includes interfaces to common ROS libraries.
In order to use ROSPlan is necessary to make a problem.pddl in wich all the objects, predicates and action are described and also a 
problem to be solved.
Once the domain is instanciated, ROSPlan autonomously is able to solve the problem and then dispatch the plan, executing one by one the
actions of the plan.
You can see in Figure 4 the general ROSPlan Overview

![image](https://user-images.githubusercontent.com/48509825/161599654-313dc303-b913-4068-922e-8d9c7c57f520.png)

Figure 4: ROSPlan Overview

## IV. SW Architecture:
The assignment is composed by three main packages:

* **sherlock_moveit**: is the pkg generated by moveit_setup_assistant starting from sherlock.xacro in the erl2/urdf.
* **erl2**: contains the urdf of the robot (xacro file, materials and gazebo plugins), the Gazebo scene, all the custom services, action, nodes
            and PDDL files (domain and problem) implemented to reach the wanted behaviour described in section II and also doxygen documentation.
* **my_rosplan_interface**: contains all the actions described into the PDDL domain file.



